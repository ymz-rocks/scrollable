function scrollable(d,b){var c={start:"start",drag:"drag",end:"end"},a={gesture:"gesture",scroller:"scroller"};if(!b)b={mode:a.gesture};function f(f){if(!f||f.length==0)return;var d={action:false,drag:function(c,a,b,e){if(!d.action)return;h(c,a,b,e)},end:function(c,a,b,e){if(!d.action)return;h(c,a,b,e);d.action=false},start:function(c,a,b,e){if(d.action)return;d.action=a;h(c,a,b,e)}};function i(b){var j=f.children(".axis."+b);if(j.length==0)return;var m=f.children(":not([class])"),i=f.children("."+a.scroller+"."+b);if(m.length==0&&i.length==0)return;var k=b=="x"?"left":"top",l=new g(f,j,i,b),h=new e(b);m.dragga({start:function(e){d.start(b,a.gesture,c.start,e)},drag:function(e){if(h.ignore(e))return;j.stop().css(k,-l.content*h.value(true));i.css(k,l.scroller*h.value());d.drag(b,a.gesture,c.drag,e)},end:function(e){var g=h.update(e);if(!g)return d.end(b,a.gesture,c.end,e,i);var f={};f[k]=g<0?0:g>1?-l.content:undefined;f[k]!=undefined&&j.stop().animate(f,e.time.duration*(e.time.duration>1e3?1:e.time.duration>500?2:3));h.fix();d.end(b,a.gesture,c.end,e)}});i.dragga({start:function(e){d.start(b,a.scroller,c.start,e)},drag:function(e){h.refresh(e);j.stop().css(k,-l.content*h.current);d.drag(b,a.scroller,c.drag,e)},end:function(e){d.end(b,a.scroller,c.end,e)}})}function h(h,g,f,e){return!b[f]||!e.user||!d.action?void 0:d.action!=g?(b.mode==a.scroller||!b.mode)&&f==c.end?b[f](e,d.action):undefined:b.mode&&b.mode!=g?void 0:d.action==a.scroller&&f==c.start?b[f](e,d.action):!e.time.duration&&!e.travel.from[h]&&!e.travel.to[h]?void 0:e.active?b[f](e,g):void 0}i("x");i("y")}function g(e,f,a,c){function g(){var a=f.children().last(),b=a.position();return{x:b.left+a.outerWidth(),y:b.top+a.outerHeight()}}var d=c=="x"?"width":"height",b=e[d]();this.content=g()[c]-b;this.scroller=a.length==0?0:b-a[d]()}function e(a){var c=a=="x",b=false;this.last=0;this.current=0;this.offset=undefined;this.delta=function(d){var b=d.range.value[a];return b==undefined?void 0:c?b-this.offset:this.offset-b};this.fix=function(){if(this.last<0)this.last=0;else if(this.last>1)this.last=1};this.ignore=function(c){if(!this.offset){this.offset=c.range.value[a];return true}else if(b){b=false;this.last=this.current}else this.current=this.last+this.delta(c)};this.refresh=function(c){b=true;this.current=c.range.value[a]};this.update=function(b){var a=this.delta(b);if(!a)return;this.last+=a;delete this.offset;return this.last};this.value=function(a){return a?this.current:this.current<0?0:this.current>1?1:this.current}}$(window).load(function(){$(d).each(function(){new f($(this))})})}